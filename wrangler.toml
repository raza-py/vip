name = "vless-proxy-worker"
main = "src/index.tsx"
compatibility_date = "2024-03-20"

# Analytics Engine dataset binding removed to avoid deployment error when
# Analytics Engine is not enabled on the Cloudflare account. If you want to
# use Analytics Engine, re-enable the following line and enable the feature
# in the Cloudflare Dashboard for your account.
# analytics_engine_datasets = [{ binding = "ANALYTICS", dataset = "vless_analytics" }]

[vars]
ADMIN_SECRET = "your-strong-secret"

[[d1_databases]]
binding = "DB"
database_name = "vless-db"
# The D1 `database_id` must be a real database id (UUID) from Cloudflare.
# It is currently a placeholder which causes the validation error (10021).
# To fix: replace the line below with your actual database id, for example:
# database_id = "01234567-89ab-cdef-0123-456789abcdef"
# If you don't need D1 for this deployment, you can comment out or remove
# the whole `[[d1_databases]]` block.
# database_id = "your-d1-database-id"

[build]
command = "npm run build:wasm"
